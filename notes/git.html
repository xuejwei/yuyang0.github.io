<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>git/github学习笔记</title>
<!-- 2014-02-01 Sat 10:57 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Yu Yang" />
<meta  name="keywords" content="git github" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="static/css/main.css"/> <link rel="shortcut icon" href="static/img/favicon.ico" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="header">
      <div class="inner">
        <h1 id="blog-title"><a href="/"> Yu Yang's Blog</a></h1>
        <ul class="nav">
          <li> <a href="/">Home</a></li>
          <li> <a href="/about.html">About</a></li>
          <li> <a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" action="https://google.com/search" id="search">
          <input type="hidden" name="q" value="site:yuyang.farbox.com" />
          <input type="text" name="q" placeholder="Search..." />
        </form>
      </div>
    </div>
</div>
<div id="content">
<h1 class="title">git/github学习笔记</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">git学习笔记</a>
<ul>
<li><a href="#sec-1-1">基本使用</a>
<ul>
<li><a href="#sec-1-1-1">git的基本命令</a></li>
<li><a href="#sec-1-1-2">git一般的工作过程是：</a></li>
</ul>
</li>
<li><a href="#sec-1-2">git的原理</a>
<ul>
<li><a href="#sec-1-2-1">工作区(work tree)</a></li>
<li><a href="#sec-1-2-2">git的暂存区(index)</a></li>
<li><a href="#sec-1-2-3">版本库</a></li>
<li><a href="#sec-1-2-4">git diff</a></li>
<li><a href="#sec-1-2-5">HEAD, master</a></li>
<li><a href="#sec-1-2-6">git reset</a></li>
<li><a href="#sec-1-2-7">git checkout</a></li>
<li><a href="#sec-1-2-8">git分支</a>
<ul>
<li><a href="#sec-1-2-8-1">创建分支</a></li>
<li><a href="#sec-1-2-8-2">切换分支</a></li>
<li><a href="#sec-1-2-8-3">合并分支</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">git github</a></li>
<li><a href="#sec-1-4">gitignore syntax</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">git学习笔记</h2>
<div class="outline-text-2" id="text-1">
<p>
git是一个分布式版本管理系统
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">基本使用</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1">git的基本命令</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>安装：sudo apt-get install git git-uid
</li>
<li>init：  git init（工作目录运行，会生成一个.git目录，里面会存放索引数据）
</li>
<li>add:    git add(添加文件)
git add . （添加所有）
（只有添加了新文件时才需要git add，如果只是修改了或删除了文件，可以只执行git commit -a）
</li>
<li>commit: git commit(提交，一般调用add后只是在临时区，只有调用commit才会
提交到git)
git commit -m "comment"
git commit -a           commit all
</li>
<li>clone:  git clone 只要有.git目录，那么就可以调用该命令来得到git管理的
所有文件
eg: git clone test.git dest\_dir/    git-&#x2014;&gt;dest\_dir
    git clone 账户@IP:工作树路径 你的目录     远程github
</li>
<li>pull:  git pull（将远程分支拉到本地，然后和本地分支合并）
</li>
<li>push： git push（将本地分支推送远程仓库）
</li>
<li>branch： 创建分支或者查看有哪些分支
git branch             查看有哪些分支
git branch TmpBranch  创建分支
git branch -d TmpBranch 删除分支
</li>
<li>checkout：改变分支（git checkout TmpBranch)
</li>
<li>merge：将制定分支与当前分支合并(git merge TmpBranch 将TmpBranch与当前分支合并）
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2">git一般的工作过程是：</h4>
<div class="outline-text-4" id="text-1-1-2">
<ol class="org-ol">
<li>git pull(将远程分支与本地分支合并)
</li>
<li>git log（查看其他成员的更改）
</li>
<li>git branch (建一个本地分支）
</li>
<li>git checkout（进入本地分支）
</li>
<li>在该本地分支上进行修改
</li>
<li>git checkout（回到主分支）
</li>
<li>git merge （将分支上所做的工作合并到主分支）
</li>
<li>git branch -d （删除今天创建的分支）
</li>
<li>git pull（将远程仓库合并到本地仓库,很重要，因为今天可能别人修改了远程仓库）
</li>
<li>git push （将本地仓库合并到远程仓库）
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">git的原理</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1">工作区(work tree)</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
就是你本地的工作目录树
</p>
<ul class="org-ul">
<li>git add :将工作区的文件提交到暂存区,暂存区的目录树会更新
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2">git的暂存区(index)</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
暂存区可以看作一个目录树，暂存区的目录树和版本库的目录树是不同的，.git目录有一个index文件，这个文件包含了
git所管理的目录中所有文件的大小以及修改时间，每一次你调用git status或者git diff这类命令时，git都会比较工作
区的文件与该index文件中记录的文件的差异，如果发现文件的大小已经改变，那么工作区的文件肯定已经改变，如果发
现文件的修改时间已改变，那么git会读取工作区中的文件与暂存区的文件的内容进行比较，如果内容相同，那么git会修
改index文件的相应条目的文件时间(因为虽然时间改变了，但文件内容没有改变)，这就是基本的工作流程了
</p>
<ul class="org-ul">
<li>git commit: 将暂存区的文件提交到版本库
</li>
<li>git reset HEAD : 暂存区的目录树会被当前分支的版本库目录树替换,所以任何未提交的更新都会丢弃,但工作区不受
影响
</li>
<li>git checkout 或者 git checkout &#x2013; &lt;file&gt; :用暂存区的全部或者部分文件来替换工作区的文件,所以这个操作会清
除没有添加到暂存区的工作区改动, <b>危险操作</b>
</li>
<li>git checkout HEAD 或者 git checkout HEAD &lt;file&gt; : 用HEAD指向的版本库分支的全部或者部分文件来替换暂存区与
工作区的文件,所以这个操作会清除所有未提交的暂存区与工作区改动. <b>危险操作</b>
</li>
<li>git rm &#x2013;cached &lt;file&gt; : 直接删除暂存区中的文件,工作区不受影响
</li>
<li>git rm &lt;file&gt; : 会删除工作区与暂存区的指定文件
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3">版本库</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
由git管理的分支代码的目录树，比如master分支，以及其它你自己创建的分支,当然操作时一般都只是当前分支的目录树
</p>
</div>
</div>

<div id="outline-container-sec-1-2-4" class="outline-4">
<h4 id="sec-1-2-4">git diff</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li>git diff : 工作区与暂存区比较
</li>
<li>git diff HEAD : 工作区与HEAD比较
</li>
<li>git diff &#x2013;cached : 暂存区与HEAD比较
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-5" class="outline-4">
<h4 id="sec-1-2-5">HEAD, master</h4>
<div class="outline-text-4" id="text-1-2-5">
<p>
HEAD(.git/HEAD)实际是一个指针,指向的是.git/refs/heads/branch-name文件, branch-name可以是master或者你自己创
建的分支名,该文件实际指向的是该分支的最新的一次commit, 如果当前是master分支,那么这几个文件的内容应该是这
样:
</p>
<ul class="org-ul">
<li>.git/HEAD : ".git/refs/heads/master" 如果用git checkout改变分支,那么master会变成相应的分支名,所以HEAD可
以认为一直指向当前分支
</li>
<li>.git/refs/heads/master:  235fd887b9f85d44ce94e8d733b8814509c1d4e8 (master分支最新一次提交的id),通过
git reset &#x2013;[hard|soft|mixed]可以重置该文件到指定的commit id,那么在你指定的commit id之后的提交就都会丢失.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-6" class="outline-4">
<h4 id="sec-1-2-6">git reset</h4>
<div class="outline-text-4" id="text-1-2-6">
<ol class="org-ol">
<li>git reset [commit-id] &lt;path&gt; : 不影响工作区与版本库,只会用commit-id对应的版本库工作树替换暂存区的工作树,实
际上相当于撤销先前的git add, 举几个例子:
<ul class="org-ul">
<li>git reset HEAD: 就是版本库中当前分支的最新一次提交的工作树替换暂存区的工作树
</li>
<li>git reset : 等价于 git reset HEAD
</li>
</ul>
</li>
<li>git reset &#x2013;hard [commit-id] : 会将版本库的引用重定向到commit-id,同时将暂存区与工作区的工作树都重置为
commit-id对应的目录树, 所以commit-id之后所有的工作区,暂存区改动以及版本库提交都会删除, <b>该命令非常危险</b>
举几个例子:
<ul class="org-ul">
<li>git reset &#x2013;hard HEAD^  : 重置HEAD到父提交, 当前提交的内容都会删除 <b>危险</b>
</li>
<li>git reset &#x2013;hard commit-id : 重置到commit-id指定的提交, commit-id之后的提交都会删除, <b>危险</b>
</li>
</ul>
</li>
<li>git reset &#x2013;soft [commit-id] : 只重置版本库的引用,但是不影响暂存区与工作区,用法和2类似
</li>
<li>git reset &#x2013;mixed [commit-id] : 重置版本库和暂存区,不改变工作区
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-1-2-7" class="outline-4">
<h4 id="sec-1-2-7">git checkout</h4>
<div class="outline-text-4" id="text-1-2-7">
<p>
该命令会影响工作区
</p>
</div>
</div>

<div id="outline-container-sec-1-2-8" class="outline-4">
<h4 id="sec-1-2-8">git分支</h4>
<div class="outline-text-4" id="text-1-2-8">
</div><div id="outline-container-sec-1-2-8-1" class="outline-5">
<h5 id="sec-1-2-8-1">创建分支</h5>
<div class="outline-text-5" id="text-1-2-8-1">
<ul class="org-ul">
<li>git branch : 显示所有分支,当前分支前会加*
</li>
<li>git branch new-branch : 创建新分支
</li>
<li>git branch new-br start-point: 创建新分支,并以start-point为起点初始化
</li>
<li>git branch -d br-name: 删除分支,如果分支上有没有合并到其他分支的提交,那么拒绝删除
</li>
<li>git branch -D br-name: 和上一个类似,但是会强制删除
</li>
<li>git branch -m old-name new-name : 将名为old-name的分支重命名为new-name,如果已存在名为new-name的分支,那
么重命名失败
</li>
<li>git branch -M old-name new-name: 强制重命名
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-8-2" class="outline-5">
<h5 id="sec-1-2-8-2">切换分支</h5>
<div class="outline-text-5" id="text-1-2-8-2">
<p>
git checkout new-br
</p>
</div>
</div>

<div id="outline-container-sec-1-2-8-3" class="outline-5">
<h5 id="sec-1-2-8-3">合并分支</h5>
<div class="outline-text-5" id="text-1-2-8-3">
<p>
git merge br-name: 将名为br-name的分支与但前分支合并
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">git github</h3>
<div class="outline-text-3" id="text-1-3">
<ol class="org-ol">
<li>git remote add remoteName remoteUrl
eg: git remote add origin git@github.com:youName/github-example.git
只第一次新建了仓库时才需要运行，实际上是将本地的仓库与远程的仓库关联起来
如果出错可以使用命令 git remote rm origin
</li>
<li>git push origin master(将本地的仓库推送到远端）
如果报错那么极有可能是远端仓库被别人提交过了，所以要先pull，与本地合并然后在提交
git pull origin master
</li>
<li>git pull -u origin master
origin是远程分支的名字，master是本地分支的名字
</li>
<li>子模块
git submodule add 子模快url 本地的路径
eg: git submodule add <a href="https://github.com/libevent/libevent.git">https://github.com/libevent/libevent.git</a> .dep/libevent
当clone了一份包含子模快的仓库时，调用git submodule update &#x2013;init可以拉取那些子模快
</li>
<li>fork后合并原仓库的改变
情景如下：我在github fork一个仓库（<a href="https://github.com/purcell/emacs.d.git">https://github.com/purcell/emacs.d.git</a> ）到我的的账户
         （<a href="https://github.com/yuyang0/emacs.d.git">https://github.com/yuyang0/emacs.d.git</a> ）然后我将这个fork仓库clone到本地，现在
         我要合并原仓库的改变。。
first: git remote add purcell <a href="https://github.com/purcell/emacs.d.git">https://github.com/purcell/emacs.d.git</a>
next: git pull purcell master (git fetch purcell, git merge purcell/master)
next: git push origin master
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">gitignore syntax</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>"#" ： 注释
</li>
<li>！   : 取反，即匹配模式的文件不忽略
</li>
<li>/   ： /结尾被当作目录，该目录的所有文件忽略
</li>
<li>/   ： /开头则只忽略工作树根目录开始匹配eg：core/TODO与/core/TODO不
同，前者只要文件路径包含core/TODO（如doc/core/TODO）即匹配，
而后者则只匹配工作树根目录下的core文件夹的TODO文件
</li>
<li>glob模式：glob模式不同于正则表达式，等同于shell模式下的方式
<p class="verse">
*：匹配任意字符<br  />
?: 匹配任意单个字符<br  />
[abcd]: 匹配a b c d中的一个<br  />
[a-z]: 匹配a-z之间的一个字符<br  />
</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_comment">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        var url = window.location.pathname;
        var disqus_identifier = url.substring(url.lastIndexOf('/')+1);
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'yuyang'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<!-- begin footer -->
<div id="footer">
  <hr />
  <ul class="links">
    <li>© 2013 Yu Yang's Blog, Created by org-mode and dropbox</li>
    <li><a href="/sitemap.xml">Sitemap</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about.html">About Me</a></li>
    <li><a href="#">Back to Top</a></li>
  </ul>
</div>
<!-- end footer -->
</div>
</body>
</html>
