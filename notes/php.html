<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>PHP笔记</title>
<!-- 2014-05-17 Sat 23:36 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Yu Yang" />
<meta  name="keywords" content="php web" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="static/css/main.css"/>
<link rel="shortcut icon" href="static/img/favicon.ico" />
<script type="text/javascript" src="static/js/custom.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="header">
      <div class="inner">
        <h1 id="site-title"><a href="/"> Yu Yang's Blog</a></h1>
        <div>
          <a href="###" id="site-nav-btn">菜单</a>
          <ul id="site-nav" class="vertical-nav mobi-hid">
            <li> <a href="/">Home</a></li>
            <li> <a href="/about.html">About</a></li>

            <li> <a href="/tags.html">Tags</a></li>

            <li> <a href="/rss.xml">RSS</a></li>
          </ul>

          <form id="site-search" method="get" action="https://google.com/search">
            <input type="hidden" name="q" value="site:yuyang.farbox.com" />
            <input type="text" name="q" placeholder="Search..." />
            <button class="btn-search" type="submit">Search</button>
          </form>
          <div style="clear:both;"> </div>
        </div>
      </div>
    </div>
</div>
<div id="content">
<h1 class="title">PHP笔记</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">php标记</a></li>
<li><a href="#sec-2">变量</a>
<ul>
<li><a href="#sec-2-1">变量</a></li>
<li><a href="#sec-2-2">常量</a></li>
<li><a href="#sec-2-3">作用域</a></li>
</ul>
</li>
<li><a href="#sec-3">操作符与控制结构</a>
<ul>
<li><a href="#sec-3-1">操作符&#xa0;&#xa0;&#xa0;<span class="tag"><span class="operator">operator</span></span></a></li>
<li><a href="#sec-3-2">控制结构</a></li>
</ul>
</li>
<li><a href="#sec-4">php数组</a>
<ul>
<li><a href="#sec-4-1">数组定义</a></li>
<li><a href="#sec-4-2">数组的key</a></li>
<li><a href="#sec-4-3">访问或者修改</a></li>
<li><a href="#sec-4-4">循环访问</a></li>
<li><a href="#sec-4-5">数组排序（原地改变数组）</a></li>
<li><a href="#sec-4-6">其它数组函数</a></li>
</ul>
</li>
<li><a href="#sec-5">字符串处理函数</a>
<ul>
<li><a href="#sec-5-1">常规字符串处理函数</a></li>
<li><a href="#sec-5-2">正则表达式函数</a></li>
</ul>
</li>
<li><a href="#sec-6">文件</a></li>
<li><a href="#sec-7">function</a>
<ul>
<li><a href="#sec-7-1">定义</a></li>
<li><a href="#sec-7-2">可变参数</a></li>
<li><a href="#sec-7-3">引用</a></li>
<li><a href="#sec-7-4">注意事项</a></li>
</ul>
</li>
<li><a href="#sec-8">OOP</a></li>
<li><a href="#sec-9">php与数据库（mysql）</a>
<ul>
<li><a href="#sec-9-1">示例代码</a></li>
<li><a href="#sec-9-2">解释</a></li>
</ul>
</li>
<li><a href="#sec-10">其它技巧</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">php标记</h2>
<div class="outline-text-2" id="text-1">
<ol class="org-ol">
<li>&lt;?php ?&gt; 是推荐的写法, 如果是纯php代码文件,那么建议省略 ?&gt;标记, 这是为了
防止php输出文件末尾空格
</li>
<li>在php文件中如果要输出大段的 HTML 文本, 那么应该跳出 &lt;?php ?&gt;, 这样比用
echo 效率高, 但是当使用 if, foreach, for, while 这样的结构时应该用这样的语法:
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">if</span> ($<span style="color: #FD971F;">expression</span> == <span style="color: #AE81FF;">true</span>): <span style="color: #F92672;">?&gt;</span>
  <span style="color: #968B26; font-weight: bold;">This</span> <span style="color: #968B26; font-weight: bold;">will</span> <span style="color: #968B26; font-weight: bold;">show</span> <span style="color: #F92672; font-weight: bold;">if</span> <span style="color: #968B26; font-weight: bold;">the</span> <span style="color: #968B26; font-weight: bold;">expression</span> <span style="color: #968B26; font-weight: bold;">is</span> <span style="color: #AE81FF;">true</span>.
<span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">else</span>: <span style="color: #F92672;">?&gt;</span>
  <span style="color: #968B26; font-weight: bold;">Otherwise</span> <span style="color: #968B26; font-weight: bold;">this</span> <span style="color: #968B26; font-weight: bold;">will</span> <span style="color: #968B26; font-weight: bold;">show</span>.
<span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">endif</span>; <span style="color: #F92672;">?&gt;</span>

<span style="color: #75715E;">/* </span><span style="color: #75715E;">foreach </span><span style="color: #75715E;">*/</span>
<span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">foreach</span> ($<span style="color: #FD971F;">news</span> <span style="color: #F92672; font-weight: bold;">as</span> $<span style="color: #FD971F;">news_item</span>): <span style="color: #F92672;">?&gt;</span>
    <span style="color: #AE81FF;">&lt;h</span>2<span style="color: #AE81FF;">&gt;</span><span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">echo</span> $<span style="color: #FD971F;">news_item</span>[<span style="color: #E6DB74;">'title'</span>] <span style="color: #F92672;">?&gt;</span><span style="color: #AE81FF;">&lt;/h</span>2<span style="color: #AE81FF;">&gt;</span>
    <span style="color: #AE81FF;">&lt;div</span> <span style="color: #AE81FF;">id=</span><span style="color: #E6DB74;">"main"</span><span style="color: #AE81FF;">&gt;</span>
        <span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">echo</span> $<span style="color: #FD971F;">news_item</span>[<span style="color: #E6DB74;">'text'</span>] <span style="color: #F92672;">?&gt;</span>
    <span style="color: #AE81FF;">&lt;/div&gt;</span>
    <span style="color: #AE81FF;">&lt;p&gt;&lt;a</span> <span style="color: #AE81FF;">href=</span><span style="color: #E6DB74;">"news/&lt;?php echo $news_item['slug'] ?&gt;"</span>&gt;<span style="color: #968B26; font-weight: bold;">View</span> <span style="color: #968B26; font-weight: bold;">article</span><span style="color: #AE81FF;">&lt;/a&gt;&lt;/p&gt;</span>

<span style="color: #F92672;">&lt;?php</span> <span style="color: #F92672; font-weight: bold;">endforeach</span> <span style="color: #F92672;">?&gt;</span>
</pre>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">变量</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">变量</h3>
<div class="outline-text-3" id="text-2-1">
<ol class="org-ol">
<li>变量必须要$符号，和perl类似.
</li>
<li>大小写：php的变量与常量区分大小写，而函数名，类名，方法名不区分大小写。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">常量</h3>
<div class="outline-text-3" id="text-2-2">
<ol class="org-ol">
<li>常量用define定义，常量使用时不需要$符号，eg: define(“const_var”, 100),使
用时直接用const_var不需要引号与$。
</li>
<li>魔术常量
<ul class="org-ul">
<li><span class="underline"><span class="underline">LINE</span></span> : 当前的行数
</li>
<li><span class="underline"><span class="underline">FILE</span></span> : 当前脚本文件名的绝对路径
</li>
<li><span class="underline"><span class="underline">DIR</span></span>  : 当前脚本所在目录的绝对路径
</li>
</ul>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">作用域</h3>
<div class="outline-text-3" id="text-2-3">
<ol class="org-ol">
<li>超全局变量
</li>
<li>常量：一旦声明在脚本内全局可用，函数内外可用
</li>
<li>全局变量，脚本内全局可用，但是函数内不可用，可用global关键词
</li>
<li>函数内静态变量，和C语言相似, 这其实就是一个closure,类似于下面的scheme代
码:
<div class="org-src-container">

<pre class="src src-scheme">(<span style="color: #F92672; font-weight: bold;">define</span> <span style="color: #A6E22E;">test</span>
  (<span style="color: #F92672; font-weight: bold;">let</span> ([i 0])
    (<span style="color: #F92672; font-weight: bold;">lambda</span> (x)
      ...)))
</pre>
</div>
<p>
<code>i</code> 就可以看做是函数体的一个静态变量, 只可惜php设计的太糟糕.
</p>
</li>
<li>函数局部变量和C语言相似
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">操作符与控制结构</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">操作符&#xa0;&#xa0;&#xa0;<span class="tag"><span class="operator">operator</span></span></h3>
<div class="outline-text-3" id="text-3-1">
<p>
php的运算符基本和c语言类似。有一个===与==这个和js类似，一个类型与值都比较，
一个只比较值。
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">控制结构</h3>
<div class="outline-text-3" id="text-3-2">
<p>
php的控制结构与C语言类似，if，switch，while，do…..while循环，for循环，多了
一个foreach，foreach是专门用于数组的，break和continue的作用于C类似，还有一
个exit可以直接结束php脚本的运行，执行错误检测时exit比较有用。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">php数组</h2>
<div class="outline-text-2" id="text-4">
<p>
php数组是一个强大的数据结构
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">数组定义</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>$arr = array（'a', 'b', 'c'）
</li>
<li>$arr = array(‘first’=&gt;’a‘，‘second’ =&gt; ‘b’, ‘third’ =&gt;’c’),
</li>
</ul>
<p>
前一种的索引是0,1,2后者的索引是’first’,’second’,’third’，后一种方式和python
的字典差不多。
</p>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">数组的key</h3>
<div class="outline-text-3" id="text-4-2">
<ol class="org-ol">
<li>key只能为整数或者字符串
</li>
<li>如果key是float,那么四舍五入
</li>
<li>如果key是bool,那么true转为1, false转为0
</li>
<li>如果key是字符串,而且该字符串是一个有效的十进制数,那么转为整数,否则就保持
原样, eg: "80" 会自动转为 80, 但是 "09" 则不会转为整数.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3">访问或者修改</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>$arr[key] : 访问键为key的元素,如果不存在则返回错误
</li>
<li>$arr[key] = val : 修改键值为key的元素的值,如果不存在那么就新建
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4">循环访问</h3>
<div class="outline-text-3" id="text-4-4">
<ol class="org-ol">
<li>foreach循环
<ul class="org-ul">
<li>foreach（$arr as $value）,
</li>
<li>foreach($arr as $key=&gt;$value),
</li>
</ul>
<p>
前一种方式只获得value，后一种获得key，value,foreach每次在运行之前都会将
数组指针自动重置到数组开头，所以不需要使用reset函数。
</p>
</li>
<li>while循环
while(list($key, $value) = each($arr))
<ul class="org-ul">
<li>each：返回数组中当前的 键／值对并将数组指针向前移动一步，each返回的也
是一个数组
<div class="org-src-container">

<pre class="src src-php">$<span style="color: #FD971F;">arr</span> = <span style="color: #F92672; font-weight: bold;">array</span>(
    <span style="color: #E6DB74;">"aa"</span> =&gt; <span style="color: #E6DB74;">"one"</span>,
    <span style="color: #E6DB74;">"bb"</span> =&gt; <span style="color: #E6DB74;">"two"</span>,
    <span style="color: #E6DB74;">"cc"</span> =&gt; <span style="color: #E6DB74;">"three"</span>);
$<span style="color: #FD971F;">first_item</span> = <span style="color: #F8F8F2; background-color: #272822;">each</span>($<span style="color: #FD971F;">arr</span>);
<span style="color: #75715E;">/* </span><span style="color: #75715E;">$first_item = array(0 =&gt; "aa", 1 =&gt; "one", "key" =&gt; "aa", "value" =&gt; "one") </span><span style="color: #75715E;">*</span><span style="color: #F92672; background-color: #272822;">/</span>
$<span style="color: #FD971F;">second_item</span> = <span style="color: #F8F8F2; background-color: #272822;">each</span>($<span style="color: #FD971F;">arr</span>);
<span style="color: #75715E;">/* </span><span style="color: #75715E;">$second_item = array(0 =&gt; "bb", 1 =&gt; "two", "key" =&gt; "bb", "value" =&gt; "two") </span><span style="color: #F92672; background-color: #272822;">*/</span>
</pre>
</div>
</li>
<li>list会将数组中索引为0,1,2…….对应的值依次赋给list的参数，比如说如果list
有3个参数,那么对应的数组中必须存在以 0,1,2 为key的元素.但是该数组不一
定是所有的key都是整数,也可能有些元素的key是字符串,比如下面的例子第4个
元素的key就是字符串,这种循环方式需要使用reset函数, 该函数不仅在数组循
环中有用,当函数使用数组返回多个值时也很有用.
<div class="org-src-container">

<pre class="src src-php">$<span style="color: #FD971F;">arr</span> = <span style="color: #F92672; font-weight: bold;">array</span>(<span style="color: #E6DB74;">"aa"</span>, <span style="color: #E6DB74;">"bb"</span>, <span style="color: #E6DB74;">"cc"</span>, <span style="color: #E6DB74;">"hello"</span> =&gt; <span style="color: #E6DB74;">"dd"</span>);
<span style="color: #F92672; font-weight: bold;">list</span>($<span style="color: #FD971F;">a</span>, $<span style="color: #FD971F;">b</span>, $<span style="color: #FD971F;">c</span>) = $<span style="color: #FD971F;">arr</span>; <span style="color: #75715E;">/* </span><span style="color: #75715E;">$a="aa", $b="bb", $c="cc"</span><span style="color: #75715E;">*/</span>
<span style="color: #F92672; font-weight: bold;">list</span>($<span style="color: #FD971F;">a</span>, , $<span style="color: #FD971F;">c</span>) = $<span style="color: #FD971F;">arr</span>;   <span style="color: #75715E;">/* </span><span style="color: #75715E;">$a="aa", $c="cc" </span><span style="color: #75715E;">*/</span>
</pre>
</div>
</li>
</ul>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5">数组排序（原地改变数组）</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>sort（对普通数组排序 ，不要应用于字典数组，因为它返回的排序数组会抹掉原字典数组的key，而将它的key变为0,1,2……）
</li>
<li>asort（对字典数组的value排序）
</li>
<li>ksort（对字典数组的key排序），
</li>
</ul>
<p>
对应的反向（降序）排序rsort，arsort，krsort。Shuffle（随机排序），array_reverse（反向排列）
</p>
</div>
</div>
<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6">其它数组函数</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>current（当前数组内部指针指向的元素，pos是current的别名）
</li>
<li>next（下一个元素的值）
</li>
<li>prev（前一个元素的值）
</li>
<li>end（内部指针重置到数组末尾，并返回末尾元素的值）
</li>
<li>reset（内部指针重置到开头，并返回开头元素的值
</li>

<li>count，sizeof（都返回数组的元素个数）
</li>
<li>array_count_values（返回数组元素中各个值出现的频率）
</li>
<li>extract（创建一系列以数组的key为名称的变量，而且这些变量的值是对应的value）。
</li>
<li>array_slice: 取出数组的一部分.
</li>
<li>array_keys : 将数组的所有键作为一个数组返回.
</li>
<li>array_values: 将数组的所有值作为一个数组返回.
</li>
<li>in_array    : 一个值是否在数组中
</li>
<li>array_key_exists: 一个key是否在数组中.
</li>

<li>array_walk : 对数组的每个元素(<b>只是value,不包括key</b>)应用一个自定义函数, 和
     <code>scheme</code> 的 <code>for-each</code> 类似.
</li>
<li>array_filter : 和 <code>scheme</code> 中 <code>filter</code> 函数相似.
</li>
<li>array_map    : 和 <code>map</code> 相似.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">字符串处理函数</h2>
<div class="outline-text-2" id="text-5">
<p>
不原地改变，而是返回一个新的结果字符串
</p>
</div>
<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">常规字符串处理函数</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>trim(ltrim,rtrim(别名chop)：删除字符串的首尾两端的空格。ltrim只删除开头的空格，rtrim只删除结尾的空格。
</li>
<li>nl2br: 将字符串中的\n转换为,&lt;br /&gt;标签，这样可以在html中换行。
</li>
<li>printf,sprintf:格式化输出。
</li>
<li>strtolower（全部小写）,strtoupper（全部大写）,ucfirst（第一个字母大写）,ucwords（所有词的第一个字母大写）。
</li>
<li>addslashes，stripslashes:将引号，反斜杠，NULL字符字符转义，以免在存入数据库时被当做控制字符，前者是添加，后者是删除，前者在存入数据库前调用，后者在从数据库取出数据后调用。
</li>
<li>explode，implode（join）：前者分割字符串成数组，后者将数组合成字符串，都需要知道分隔符，join是implode的别名。
</li>
<li>strtok：一次只会返回分割得到的一个字符串，而不是像explode那样返回数组
</li>
<li>substr：指定开始与结尾来得到一个指定字符串的子字符串。
</li>
<li>字符串的比较：strcmp，strcasecmp（前者区分大小写，后者不区分，是字典序比较，故‘2‘&gt;’12’）,strnatcmp,strnatcasecmp(按自然序比较，故’12’&gt;’2’).
</li>
<li>strlen：字符串的长度。
</li>
<li>查找子字符串：strstr（strchr 是strstr的别名，strstr区分大小写，stristr不区分大小写,都返回子字符串第一次出现的位置到结尾形成的字符串），strrchr(返回子字符串最后一次出现的位置到结尾形成的字符串)
</li>
<li>查找子字符串的位置：strpos，strrpos
</li>
<li>替换子字符串：str_replace，substr_replace
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">正则表达式函数</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>ereg（eregi不区分大小写）：搜索一个匹配，可以使用子模式。
</li>
<li>ereg_replace,eregi_replace：替换
</li>
<li>split：用指定的模式将字符串分割为一个数组

<p>
<b>以上的函数是POSIX正则表达式，而php5.3被废弃，全部采用perl兼容的正则表达式，主要函数如下：</b>
</p>
</li>
<li>preg_match:搜索给定模式的一个匹配，可以将该匹配按子模式分割成数组返回，其中【0】是完整的匹配，【1】是第一个子模式的匹配，以此类推。
</li>
<li>preg_match_all：搜索所有给定模式的匹配，返回一个多维数组，该多维数组会包含所有的完整匹配以及子模式匹配，数组的组织形式由flag参数指定。
</li>
<li>preg_grep:搜索一个给定的数组
</li>
<li>preg_replace:替换。
</li>
<li>preg_split:分割为数组。
Perl正则表达式和POSISX表达式的区别：perl正则表达式的模式需要分隔符，分隔符放在pattern的开头和结尾，可以使/,#,~等，没有专门为区分大小写编写对应的函数，而是使用模式修饰符，模式修饰符放在pattern的分隔符的后面，主要有i（不区分大小写）s（点号匹配换行符）U逆转贪婪模式，perl从第一个合法匹配后停止，而且是贪婪模式。
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">文件</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>fopen：打开文件，为了移植性模式应该加上b。可以打开网络上的远程文件。
</li>
<li>fwrite（fputs是fwrite的别名）：写文件
</li>
<li>file_put_contents:可以在不使用fopen的情况下写入文件
</li>
<li>fgets,fgetss,fgetcsv:读取文件的一行数据，fgetss会去掉读出的行中的php与html标签，fgetcsv可以将读出的行分割为数组返回。
</li>
<li>readfile，file，fpassthru：读取整个文件。Readfile是向标准输出显示，file是读入一个数组。
</li>
<li>fgetc：读入一个字符，会显示EOF结束符，所以需要检查。
</li>
<li>fread：读入任意字节的字符串。
</li>
<li>file_get_contents：在不使用fopen的情况下直接从文件读。
</li>
<li>file_exists：文件是否存在。
</li>
<li>filesize：文件的大小。
</li>
<li>unlink：删除文件。
</li>
<li>rewind，fseek，ftell：rewind复位到文件开头，fseek文件中定位，ftell目前文件指针的位置。
</li>
<li>flock：文件锁定。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">function</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">定义</h3>
<div class="outline-text-3" id="text-7-1">
<pre class="example">
function  func_name($a, $b….)
{
    your code
}
</pre>
<p>
可以使用默认参数，方法是在形参后加=，eg：上例 $b = 1函数使用return和C语言类
似.
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span>
<span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">foo</span>($<span style="color: #FD971F;">arg_1</span>, $<span style="color: #FD971F;">arg_2</span>, <span style="color: #75715E;">/* </span><span style="color: #75715E;">..., </span><span style="color: #75715E;">*/</span> $<span style="color: #FD971F;">arg_n</span>)
{
    <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">"Example function.\n"</span>;
    <span style="color: #F92672; font-weight: bold;">return</span> $<span style="color: #FD971F;">retval</span>;
}
<span style="color: #F92672;">?&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">可变参数</h3>
<div class="outline-text-3" id="text-7-2">
<ol class="org-ol">
<li>func_num_args() : 返回当前调用的参数个数
</li>
<li>func_get_arg(int $arg_num) : 返回单个参数, eg: func_get_arg(0) 返回当前
调用地第一个参数.
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span>
<span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">foo</span>()
{
    $<span style="color: #FD971F;">numargs</span> = <span style="color: #F8F8F2; background-color: #272822;">func_num_args</span>();
    <span style="color: #F92672; font-weight: bold;">if</span>($<span style="color: #FD971F;">numargs</span> <span style="color: #AE81FF;">&gt;</span>= <span style="color: #F8F8F2; background-color: #272822;">2</span>){
        <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">"the second argument is: "</span> . <span style="color: #F8F8F2; background-color: #272822;">func_get_arg</span>(<span style="color: #F8F8F2; background-color: #272822;">1</span>);
        <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">'&lt;br /&gt;'</span>;
    }
    <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">"the argument list is: "</span>;
    <span style="color: #F8F8F2; background-color: #272822;">var_dump</span>(<span style="color: #F8F8F2; background-color: #272822;">func_get_args </span>());
}
<span style="color: #F8F8F2; background-color: #272822;">foo</span>(<span style="color: #E6DB74;">'first arg'</span>, <span style="color: #E6DB74;">'second arg'</span>);
<span style="color: #F92672;">?&gt;</span>
</pre>
</div>
</li>
<li>func_get_args : 以一个数组的形式返回当前调用的参数列表.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">引用</h3>
<div class="outline-text-3" id="text-7-3">
<p>
函数可以传递引用也可以返回引用,函数返回引用时必须在定义与调用的时候都加上&amp;，
但是return语句不用加&amp;
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span>
<span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">add_some_extra</span>(&amp;$<span style="color: #FD971F;">string</span>)
{
    $<span style="color: #FD971F;">string</span> .= <span style="color: #E6DB74;">'and something extra.'</span>;
}
$<span style="color: #FD971F;">str</span> = <span style="color: #E6DB74;">'This is a string,'</span>;
<span style="color: #F8F8F2; background-color: #272822;">add_some_extra</span>($<span style="color: #FD971F;">str</span>);        <span style="color: #75715E;">/* </span><span style="color: #75715E;">don't use add_some_extra(&amp;$str) </span><span style="color: #75715E;">*/</span>
<span style="color: #F92672; font-weight: bold;">echo</span> $<span style="color: #FD971F;">str</span>;    <span style="color: #75715E;">//</span><span style="color: #75715E;">outputs 'This is a string, and something extra.'</span>
<span style="color: #F92672;">?&gt;</span>

<span style="color: #F92672;">&lt;?php</span>
<span style="color: #F92672; font-weight: bold;">function</span> &amp;<span style="color: #A6E22E;">returns_reference</span>()
{
    <span style="color: #F92672; font-weight: bold;">return</span> $<span style="color: #FD971F;">someref</span>;
}

$<span style="color: #FD971F;">newref</span> =&amp; <span style="color: #F8F8F2; background-color: #272822;">returns_reference</span>();
<span style="color: #F92672;">?&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4">注意事项</h3>
<div class="outline-text-3" id="text-7-4">
<ol class="org-ol">
<li>php 的函数中要引用全局变量, 必须使用 global $varname; 来申明,否则php它会
自动创建一个初始值为0的新变量 <b>bad design</b>.
</li>
<li>php的函数可以看做是残缺的high order function. 可以将函数赋给一个变量,然
后直接通过变量来调用.但是函数返回以及匿名函数就实现的比较糟糕,这也是
<b>bad design</b>.
</li>
<li>php中的函数与类都是全局作用域,可以一个函数内定义,而在外部调用, <b>bad
design</b>
</li>
<li>php不支持函数重载,也不可能取消或者重定义已声明的函数
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">OOP</h2>
<div class="outline-text-2" id="text-8">
<p>
示例代码:
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span>

<span style="color: #F92672; font-weight: bold;">class</span> <span style="color: #66D9EF;">A</span>
{
   <span style="color: #F92672; font-weight: bold;">var</span> $<span style="color: #FD971F;">attribute1</span>; <span style="color: #75715E;">//</span><span style="color: #75715E;">&#36825;&#20010;&#31867;&#23454;&#20363;&#30340;&#23646;&#24615;&#65292;&#19981;&#26159;&#31867;&#26412;&#36523;&#30340;&#23646;&#24615;&#65292;&#19981;&#35201;&#21644;python&#24324;&#28151;&#20102;&#12290;&#40664;&#35748;&#20844;&#26377;</span>
   <span style="color: #F92672; font-weight: bold;">public</span> $<span style="color: #FD971F;">attribute2</span>;<span style="color: #75715E;">//</span><span style="color: #75715E;">&#25351;&#23450;public&#65292;private&#21518;&#26368;&#22909;&#30465;&#25481;var</span>
   <span style="color: #F92672; font-weight: bold;">private</span> $<span style="color: #FD971F;">attribute3</span> = <span style="color: #F8F8F2; background-color: #272822;">2</span>;<span style="color: #75715E;">//</span><span style="color: #75715E;">&#21487;&#20197;&#30452;&#25509;&#36171;&#20540;&#65292;&#19981;&#19968;&#23450;&#35201;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;</span>
   <span style="color: #F92672; font-weight: bold;">protected</span> $<span style="color: #FD971F;">attribute4</span>;

   <span style="color: #F92672; font-weight: bold;">public</span> <span style="color: #F92672; font-weight: bold;">static</span> $<span style="color: #FD971F;">my_static</span> = <span style="color: #F8F8F2; background-color: #272822;">5</span>; <span style="color: #75715E;">//</span><span style="color: #75715E;">&#38745;&#24577;&#21464;&#37327;&#20063;&#26159;&#31867;&#21464;&#37327;&#65292;&#31867;&#22806;&#37096;&#35775;&#38382;</span>
   <span style="color: #75715E;">//</span><span style="color: #75715E;">A::my_static; &#31867;&#20869;&#37096;&#35775;&#38382;&#65306;parent::my_static,self::my_static</span>

   <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">__construct</span>($<span style="color: #FD971F;">param</span>)  <span style="color: #75715E;">//</span><span style="color: #75715E;">&#26500;&#36896;&#20989;&#25968;</span>
   {
       <span style="color: #75715E;">/*</span>
<span style="color: #75715E;">        * &#19981;&#26159; $this-&gt;$attribute1, &#22240;&#20026; $this-&gt;$attribute1 &#20250;&#20808;&#23558;</span>
<span style="color: #75715E;">        * $attribute1 &#27714;&#20540;, &#24471;&#21040;&#30340;&#20540;&#20877;&#20316;&#20026;&#23646;&#24615;&#21517;&#21435;&#26597;&#25214;, &#25152;&#20197;&#22914;&#26524;</span>
<span style="color: #75715E;">        * $attribute1 &#30340;&#27714;&#20540;&#32467;&#26524;&#20026; 'aa', &#37027;&#20040; $this-&gt;$attribute1 &#23601;&#31561;&#20215;&#20110;</span>
<span style="color: #75715E;">        * $this-&gt;aa .</span>
<span style="color: #75715E;">        </span><span style="color: #75715E;">*/</span>
       $<span style="color: #AE81FF;">this</span>-&gt;<span style="color: #FD971F;">attribute1</span> = $<span style="color: #FD971F;">param</span>;
   }
   <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">__destruct</span>()  <span style="color: #75715E;">//</span><span style="color: #75715E;">&#26512;&#26500;&#20989;&#25968;</span>
   {
   }
   <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">__get</span>($<span style="color: #FD971F;">name</span>)
   {
       <span style="color: #75715E;">/*</span>
<span style="color: #75715E;">        *&#21487;&#20197;&#25318;&#25130;$obj-&gt;$name&#36825;&#31181;&#23545;&#31867;&#23454;&#20363;&#30340;&#23646;&#24615;&#30452;&#25509;&#35775;&#38382;&#30340;&#35821;&#21477;&#12290;</span>
<span style="color: #75715E;">        *&#21482;&#26377;&#22312;$name&#23646;&#24615;&#27809;&#26377;&#23450;&#20041;&#26102;&#25165;&#20250;&#35302;&#21457;,&#36825;&#24847;&#21619;&#30528;&#24403;&#23646;&#24615;&#26159;&#31169;&#26377;&#25110;&#32773;&#20445;&#25252;&#26102;&#20063;&#20250;&#35302;&#21457;</span>
<span style="color: #75715E;">        </span><span style="color: #75715E;">*/</span>
       <span style="color: #F92672; font-weight: bold;">return</span> $<span style="color: #AE81FF;">this</span>-&gt;<span style="color: #FD971F;">$name</span>;
   }
   <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">__set</span>($<span style="color: #FD971F;">name</span>, $<span style="color: #FD971F;">value</span>)
   {
       <span style="color: #75715E;">/* </span><span style="color: #75715E;">&#21487;&#20197;&#25318;&#25130;$obj-&gt;$name=$value&#36825;&#31181;&#23545;&#31867;&#23454;&#20363;&#30340;&#23646;&#24615;&#30340;&#20540;&#30452;&#25509;&#36171;&#20540;&#30340;&#35821;&#21477;&#12290;</span>
<span style="color: #75715E;">        * &#21482;&#26377;&#22312;$name&#23646;&#24615;&#27809;&#26377;&#23450;&#20041;&#26102;&#25165;&#20250;&#35302;&#21457;,&#36825;&#24847;&#21619;&#30528;&#24403;&#23646;&#24615;&#26159;&#31169;&#26377;&#25110;&#32773;&#20445;&#25252;&#26102;&#20063;&#20250;&#35302;&#21457;</span>
<span style="color: #75715E;">        * Example:</span>
<span style="color: #75715E;">        *         $obj-&gt;aa = 2</span>
<span style="color: #75715E;">        * &#31561;&#20215;&#20110;:</span>
<span style="color: #75715E;">        *         __set('aa', 2)</span>
<span style="color: #75715E;">        </span><span style="color: #75715E;">*/</span>
       $<span style="color: #AE81FF;">this</span>-&gt;<span style="color: #FD971F;">$name</span> = $<span style="color: #FD971F;">value</span>;
   }
   <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">operation1</span>() <span style="color: #75715E;">//</span><span style="color: #75715E;">&#40664;&#35748;&#20844;&#26377;</span>
   {
   }
}
<span style="color: #F92672; font-weight: bold;">class</span> <span style="color: #66D9EF;">B</span> <span style="color: #F92672; font-weight: bold;">extends</span> <span style="color: #66D9EF;">A</span>
{<span style="color: #75715E;">//</span><span style="color: #75715E;">&#32487;&#25215;&#37117;&#26159;&#31867;&#20284;&#20110;C++&#30340;&#20844;&#26377;&#32487;&#25215;</span>
 <span style="color: #75715E;">//</span><span style="color: #75715E;">&#21487;&#20197;&#37325;&#36733;&#23376;&#31867;&#30340;&#23646;&#24615;&#19982;&#25104;&#21592;&#26041;&#27861;</span>
   <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">__construct</span>()
   {
       <span style="color: #AE81FF;">parent</span>::<span style="color: #F8F8F2; background-color: #272822;">__construct</span>();<span style="color: #75715E;">//</span><span style="color: #75715E;">&#25191;&#34892;&#29238;&#31867;&#30340;&#26500;&#36896;&#20989;&#25968;</span>
   }
}

<span style="color: #75715E;">// </span><span style="color: #75715E;">interface (&#25509;&#21475;)</span>
<span style="color: #F92672; font-weight: bold;">interface</span> <span style="color: #66D9EF;">iTemplate</span>
{
   <span style="color: #F92672; font-weight: bold;">public</span> <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">setVariable</span>($<span style="color: #FD971F;">name</span>, $<span style="color: #FD971F;">var</span>);
   <span style="color: #F92672; font-weight: bold;">public</span> <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">getHtml</span>($<span style="color: #FD971F;">template</span>);
}

<span style="color: #F92672; font-weight: bold;">class</span> <span style="color: #66D9EF;">Template</span> <span style="color: #F92672; font-weight: bold;">implements</span> <span style="color: #66D9EF;">iTemplate</span>
{
   <span style="color: #F92672; font-weight: bold;">private</span> $<span style="color: #FD971F;">vars</span> = <span style="color: #F92672; font-weight: bold;">array</span>();

   <span style="color: #F92672; font-weight: bold;">public</span> <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">setVariable</span>($<span style="color: #FD971F;">name</span>, $<span style="color: #FD971F;">var</span>)
   {
       $<span style="color: #AE81FF;">this</span>-&gt;<span style="color: #FD971F;">vars</span>[$<span style="color: #FD971F;">name</span>] = $<span style="color: #FD971F;">var</span>;
   }

   <span style="color: #F92672; font-weight: bold;">public</span> <span style="color: #F92672; font-weight: bold;">function</span> <span style="color: #A6E22E;">getHtml</span>($<span style="color: #FD971F;">template</span>)
   {
       <span style="color: #F92672; font-weight: bold;">foreach</span>($<span style="color: #AE81FF;">this</span>-&gt;<span style="color: #FD971F;">vars</span> <span style="color: #F92672; font-weight: bold;">as</span> $<span style="color: #FD971F;">name</span> =&gt; $<span style="color: #FD971F;">value</span>) {
           $<span style="color: #FD971F;">template</span> = <span style="color: #F8F8F2; background-color: #272822;">str_replace</span>(<span style="color: #E6DB74;">'{'</span> . $<span style="color: #FD971F;">name</span> . <span style="color: #E6DB74;">'}'</span>, $<span style="color: #FD971F;">value</span>, $<span style="color: #FD971F;">template</span>);
       }

       <span style="color: #F92672; font-weight: bold;">return</span> $<span style="color: #FD971F;">template</span>;
   }
}

$<span style="color: #FD971F;">object</span> = <span style="color: #F92672; font-weight: bold;">new</span> <span style="color: #66D9EF;">A</span>() <span style="color: #75715E;">//</span><span style="color: #75715E;">&#23454;&#20363;&#21270;&#31867;</span>
<span style="color: #F92672;">?&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">php与数据库（mysql）</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1">示例代码</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span>

<span style="color: #75715E;">//</span><span style="color: #75715E;">&#38754;&#21521;&#36807;&#31243;&#30340;&#20195;&#30721;</span>
$<span style="color: #FD971F;">db</span> = <span style="color: #F8F8F2; background-color: #272822;">mysqli_connect</span>(<span style="color: #E6DB74;">"example.com"</span>, <span style="color: #E6DB74;">"user"</span>, <span style="color: #E6DB74;">"password"</span>, <span style="color: #E6DB74;">"database"</span>);
<span style="color: #F92672; font-weight: bold;">if</span> (<span style="color: #F8F8F2; background-color: #272822;">mysqli_connect_errno</span>($<span style="color: #FD971F;">db</span>)) {
    <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">"Failed to connect to MySQL: "</span> . <span style="color: #F8F8F2; background-color: #272822;">mysqli_connect_error</span>();
}

$<span style="color: #FD971F;">res</span> = <span style="color: #F8F8F2; background-color: #272822;">mysqli_query</span>($<span style="color: #FD971F;">db</span>, <span style="color: #E6DB74;">"SELECT 'A world full of ' AS _msg FROM DUAL"</span>);
$<span style="color: #FD971F;">row</span> = <span style="color: #F8F8F2; background-color: #272822;">mysqli_fetch_assoc</span>($<span style="color: #FD971F;">res</span>);
<span style="color: #F92672; font-weight: bold;">echo</span> $<span style="color: #FD971F;">row</span>[<span style="color: #E6DB74;">'_msg'</span>];


<span style="color: #75715E;">//</span><span style="color: #75715E;">&#38754;&#21521;&#23545;&#35937;&#30340;&#20195;&#30721;</span>
$<span style="color: #FD971F;">db</span> = <span style="color: #F92672; font-weight: bold;">new</span> <span style="color: #66D9EF;">mysqli</span>(<span style="color: #E6DB74;">"example.com"</span>, <span style="color: #E6DB74;">"user"</span>, <span style="color: #E6DB74;">"password"</span>, <span style="color: #E6DB74;">"database"</span>);
<span style="color: #F92672; font-weight: bold;">if</span> ($<span style="color: #FD971F;">db</span>-<span style="color: #AE81FF;">&gt;</span><span style="color: #FD971F;">connect_errno</span>) {
    <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">"Failed to connect to MySQL: "</span> . $<span style="color: #FD971F;">db</span>-&gt;<span style="color: #FD971F;">connect_error</span>;
}

$<span style="color: #FD971F;">res</span> = $<span style="color: #FD971F;">db</span>-&gt;<span style="color: #F8F8F2; background-color: #272822;">query</span>(<span style="color: #E6DB74;">"SELECT 'choices to please everybody,' AS _msg FROM DUAL"</span>);
$<span style="color: #FD971F;">num_results</span> = $<span style="color: #FD971F;">res</span>-&gt;<span style="color: #FD971F;">num_rows</span>;
<span style="color: #F92672; font-weight: bold;">for</span>($<span style="color: #FD971F;">i</span> = <span style="color: #F8F8F2; background-color: #272822;">0</span>;$<span style="color: #FD971F;">i</span> &lt; $<span style="color: #FD971F;">num_result</span>; $<span style="color: #FD971F;">i</span>++)
{
$<span style="color: #FD971F;">row</span> = $<span style="color: #FD971F;">res</span>-<span style="color: #AE81FF;">&gt;</span><span style="color: #F8F8F2; background-color: #272822;">fetch_assoc</span>();
<span style="color: #F92672; font-weight: bold;">echo</span> $<span style="color: #FD971F;">row</span>[<span style="color: #E6DB74;">'_msg'</span>];
}
$<span style="color: #FD971F;">res</span>-&gt;<span style="color: #F8F8F2; background-color: #272822;">free</span>();
$<span style="color: #FD971F;">db</span>-&gt;<span style="color: #F8F8F2; background-color: #272822;">close</span>();

 <span style="color: #F92672;">?&gt;</span>
</pre>
</div>
<p>
为了防止SQL注入攻击，应该对用户的输入使用mysqli_real_escape_string函数，他
会将输入的引号等特殊字符转义，不建议使用addslashes.
</p>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2">解释</h3>
<div class="outline-text-3" id="text-9-2">
<p>
php执行一次query时,如果是select 查询,那么会返回一个mysqli_result对象.如果是
其它查询,那么成功就返回 True.
</p>
<ol class="org-ol">
<li>mysqli_result:
<ul class="org-ul">
<li>$num_rows(属性): 结果集的记录条数
</li>
<li>fetch_assoc(方法): 将一条记录作为一个关联数组返回, 数组的key是数据表的
field name, 同时将记录指针移到下一条记录.可以用while了来循环读取.
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672; font-weight: bold;">while</span> ($<span style="color: #FD971F;">row</span> = $<span style="color: #FD971F;">result</span>-&gt;<span style="color: #F8F8F2; background-color: #272822;">fetch_assoc</span>()) {
    <span style="color: #F8F8F2; background-color: #272822;">printf </span>(<span style="color: #E6DB74;">"%s (%s)\n"</span>, $<span style="color: #FD971F;">row</span>[<span style="color: #E6DB74;">"Name"</span>], $<span style="color: #FD971F;">row</span>[<span style="color: #E6DB74;">"CountryCode"</span>]);
}
</pre>
</div>
</li>
</ul>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">其它技巧</h2>
<div class="outline-text-2" id="text-10">
<ol class="org-ol">
<li>对字符串可以使用单，双引号的场合尽量使用单引号，因为使用双引号效率不高。
</li>
<li>可以在表达式前加 @ 来抑制错误.
</li>
<li>私有的变量与方法的名字应该以下划线开头.
</li>
<li>对于一个没有设置的变量直接用 <code>if</code> 会有错误，因此应该使用isset或者empty检
查，推荐empty。
</li>
<li>show_source函数可以高亮显示程序代码。
</li>
<li>密码加密推荐使用crypt函数的blowfish算法，不推荐使用sha1,或者md5.
<div class="org-src-container">

<pre class="src src-php"><span style="color: #F92672;">&lt;?php</span>
$<span style="color: #FD971F;">hash</span> = <span style="color: #F8F8F2; background-color: #272822;">crypt</span>($<span style="color: #FD971F;">password</span>);
<span style="color: #F92672; font-weight: bold;">if</span> (<span style="color: #F8F8F2; background-color: #272822;">crypt</span>($<span style="color: #FD971F;">user_input</span>, $<span style="color: #FD971F;">hash</span>) == $<span style="color: #FD971F;">hash</span>) { <span style="color: #75715E;">/* </span><span style="color: #75715E;">use hash as the salt </span><span style="color: #75715E;">*/</span>
   <span style="color: #F92672; font-weight: bold;">echo</span> <span style="color: #E6DB74;">"Password verified!"</span>;
}
<span style="color: #F92672;">?&gt;</span>
</pre>
</div>
</li>
<li>生成一个唯一的字符串：uniqid函数。
</li>
<li>对于表单，在点击提交按钮之前$_POST中的索引是不存在的，所以这样调用
$_POST['name']试图获得name输入框的值会报错，因为 'name' 索引不存在。这时
调用isset和empty返回false与true，如果点击了提交按钮，但是用户没有在输入框
中输入任何数据，那么$_POST['name']的值是空字符串，这时调用isset会返回true，
所以最好调用empty函数。
</li>
<li>尽量使用字符串处理函数，而不要使用正则表达式，因为前者更快。
</li>
<li>__autoload($classname)需要自动加载的时候，定义这个函数。
</li>
<li>每一个成功的POST页面都应该重定向，因为如果不重定向，那么刷新该页面会造成
POST数据重复提交。。
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_comment">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        var url = window.location.pathname;
        var disqus_identifier = url.substring(url.lastIndexOf('/')+1);
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'yuyang'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<!-- begin footer -->
<div id="footer">
  <ul class="links vertical-nav">
    <li><a href="/sitemap.xml">Sitemap</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about.html">About Me</a></li>
    <li><a class="back-to-top" href="#">Back to Top</a></li>
  </ul>
  <span>© 2013 Yu Yang's Blog, Created by org-mode and dropbox</span>
  <a href="#" class="back-to-top" id="fixed-back-to-top" ></a>
</div>
<!-- end footer -->
</div>
</body>
</html>
