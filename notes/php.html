<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-02-20 Sat 22:43 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>PHP笔记</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Yu Yang" />
<meta  name="keywords" content="php web" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="static/css/main.css"/>
<link rel="shortcut icon" href="static/img/favicon.ico" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "%LINEBREAKS" },
                        webFont: "%FONT"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "%LINEBREAKS" },
              font: "%FONT"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "%AUTONUMBER"},
               MultLineWidth: "%MULTLINEWIDTH",
               TagSide: "%TAGSIDE",
               TagIndent: "%TAGINDENT"
             }
});
</script>
<script type="text/javascript"
        src="http://cdn.bootcss.com/mathjax/2.4.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div id="preamble" class="status">
<div id="header">
      <div class="inner">
        <h1 id="site-title"><a href="/"> 编码者言 </a></h1>
        <div>
          <a href="###" id="site-nav-btn">菜单</a>
          <ul id="site-nav" class="vertical-nav mobi-hid">
            <li> <a href="/">Home</a></li>
            <li> <a href="/about.html">About</a></li>

            <li> <a href="/tags.html">Tags</a></li>

            <li> <a href="/atom.xml">RSS</a></li>
          </ul>

          <form id="site-search" method="get" action="https://google.com/search">
            <input type="hidden" name="q" value="site:yuyang0.github.io" />
            <input type="text" name="q" placeholder="Search..." />
            <button class="btn-search" type="submit">Search</button>
          </form>
          <div style="clear:both;"> </div>
        </div>
      </div>
    </div>
</div>
<div id="content">
<h1 class="title">PHP笔记</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">php标记</a></li>
<li><a href="#orgheadline5">变量</a>
<ul>
<li><a href="#orgheadline2">变量</a></li>
<li><a href="#orgheadline3">常量</a></li>
<li><a href="#orgheadline4">作用域</a></li>
</ul>
</li>
<li><a href="#orgheadline8">操作符与控制结构</a>
<ul>
<li><a href="#orgheadline6">操作符&#xa0;&#xa0;&#xa0;<span class="tag"><span class="operator">operator</span></span></a></li>
<li><a href="#orgheadline7">控制结构</a></li>
</ul>
</li>
<li><a href="#orgheadline9">php数组</a>
<ul>
<li><a href="#orgheadline10">数组定义</a></li>
<li><a href="#orgheadline11">数组的key</a></li>
<li><a href="#orgheadline12">访问或者修改</a></li>
<li><a href="#orgheadline13">循环访问</a></li>
<li><a href="#orgheadline14">数组排序（原地改变数组）</a></li>
<li><a href="#orgheadline15">其它数组函数</a></li>
</ul>
</li>
<li><a href="#orgheadline16">字符串处理函数</a>
<ul>
<li><a href="#orgheadline17">常规字符串处理函数</a></li>
<li><a href="#orgheadline18">正则表达式函数</a></li>
</ul>
</li>
<li><a href="#orgheadline19">文件</a></li>
<li><a href="#orgheadline24">function</a>
<ul>
<li><a href="#orgheadline20">定义</a></li>
<li><a href="#orgheadline21">可变参数</a></li>
<li><a href="#orgheadline22">引用</a></li>
<li><a href="#orgheadline23">注意事项</a></li>
</ul>
</li>
<li><a href="#orgheadline25">OOP</a></li>
<li><a href="#orgheadline28">php与数据库（mysql）</a>
<ul>
<li><a href="#orgheadline26">示例代码</a></li>
<li><a href="#orgheadline27">解释</a></li>
</ul>
</li>
<li><a href="#orgheadline29">其它技巧</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">php标记</h2>
<div class="outline-text-2" id="text-orgheadline1">
<ol class="org-ol">
<li>&lt;?php ?&gt; 是推荐的写法, 如果是纯php代码文件,那么建议省略 ?&gt;标记, 这是为了
防止php输出文件末尾空格</li>
<li><p>
在php文件中如果要输出大段的 HTML 文本, 那么应该跳出 &lt;?php ?&gt;, 这样比用
echo 效率高, 但是当使用 if, foreach, for, while 这样的结构时应该用这样的语法:
</p>
<div class="org-src-container">

<pre class="src src-php">&lt;?php if ($expression == true): ?&gt;
  This will show if the expression is true.
&lt;?php else: ?&gt;
  Otherwise this will show.
&lt;?php endif; ?&gt;

/* foreach */
&lt;?php foreach ($news as $news_item): ?&gt;
    &lt;h2&gt;&lt;?php echo $news_item['title'] ?&gt;&lt;/h2&gt;
    &lt;div id="main"&gt;
        &lt;?php echo $news_item['text'] ?&gt;
    &lt;/div&gt;
    &lt;p&gt;&lt;a href="news/&lt;?php echo $news_item['slug'] ?&gt;"&gt;View article&lt;/a&gt;&lt;/p&gt;

&lt;?php endforeach ?&gt;
</pre>
</div></li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5">变量</h2>
<div class="outline-text-2" id="text-orgheadline5">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">变量</h3>
<div class="outline-text-3" id="text-orgheadline2">
<ol class="org-ol">
<li>变量必须要$符号，和perl类似.</li>
<li>大小写：php的变量与常量区分大小写，而函数名，类名，方法名不区分大小写。</li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">常量</h3>
<div class="outline-text-3" id="text-orgheadline3">
<ol class="org-ol">
<li>常量用define定义，常量使用时不需要$符号，eg: define(“const_var”, 100),使
用时直接用const_var不需要引号与$。</li>
<li>魔术常量
<ul class="org-ul">
<li>__LINE__ : 当前的行数</li>
<li>__FILE__ : 当前脚本文件名的绝对路径</li>
<li>__DIR__  : 当前脚本所在目录的绝对路径</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">作用域</h3>
<div class="outline-text-3" id="text-orgheadline4">
<ol class="org-ol">
<li>超全局变量</li>
<li>常量：一旦声明在脚本内全局可用，函数内外可用</li>
<li>全局变量，脚本内全局可用，但是函数内不可用，可用global关键词</li>
<li><p>
函数内静态变量，和C语言相似, 这其实就是一个closure,类似于下面的scheme代
码:
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span style="color: #DCDCCC;">(</span><span style="color: #F0DFAF; font-weight: bold;">define</span> <span style="color: #93E0E3;">test</span>
  <span style="color: #BFEBBF;">(</span><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #D0BF8F;">(</span><span style="color: #93E0E3;">[</span>i <span style="color: #BFEBBF;">0</span><span style="color: #93E0E3;">]</span><span style="color: #D0BF8F;">)</span>
    <span style="color: #D0BF8F;">(</span><span style="color: #F0DFAF; font-weight: bold;">lambda</span> <span style="color: #93E0E3;">(</span>x<span style="color: #93E0E3;">)</span>
      ...<span style="color: #D0BF8F;">)</span><span style="color: #BFEBBF;">)</span><span style="color: #DCDCCC;">)</span>
</pre>
</div>
<p>
<code>i</code> 就可以看做是函数体的一个静态变量, 只可惜php设计的太糟糕.
</p></li>
<li>函数局部变量和C语言相似</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-2">
<h2 id="orgheadline8">操作符与控制结构</h2>
<div class="outline-text-2" id="text-orgheadline8">
</div><div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">操作符&#xa0;&#xa0;&#xa0;<span class="tag"><span class="operator">operator</span></span></h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>
php的运算符基本和c语言类似。有一个===与==这个和js类似，一个类型与值都比较，
一个只比较值。
</p>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">控制结构</h3>
<div class="outline-text-3" id="text-orgheadline7">
<p>
php的控制结构与C语言类似，if，switch，while，do…..while循环，for循环，多了
一个foreach，foreach是专门用于数组的，break和continue的作用于C类似，还有一
个exit可以直接结束php脚本的运行，执行错误检测时exit比较有用。
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-2">
<h2 id="orgheadline9">php数组</h2>
<div class="outline-text-2" id="text-orgheadline9">
<p>
php数组是一个强大的数据结构
</p>
</div>
<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10">数组定义</h3>
<div class="outline-text-3" id="text-orgheadline10">
<ul class="org-ul">
<li>$arr = array（'a', 'b', 'c'）</li>
<li>$arr = array(‘first’=&gt;’a‘，‘second’ =&gt; ‘b’, ‘third’ =&gt;’c’),</li>
</ul>
<p>
前一种的索引是0,1,2后者的索引是’first’,’second’,’third’，后一种方式和python
的字典差不多。
</p>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11">数组的key</h3>
<div class="outline-text-3" id="text-orgheadline11">
<ol class="org-ol">
<li>key只能为整数或者字符串</li>
<li>如果key是float,那么四舍五入</li>
<li>如果key是bool,那么true转为1, false转为0</li>
<li>如果key是字符串,而且该字符串是一个有效的十进制数,那么转为整数,否则就保持
原样, eg: "80" 会自动转为 80, 但是 "09" 则不会转为整数.</li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12">访问或者修改</h3>
<div class="outline-text-3" id="text-orgheadline12">
<ul class="org-ul">
<li>$arr[key] : 访问键为key的元素,如果不存在则返回错误</li>
<li>$arr[key] = val : 修改键值为key的元素的值,如果不存在那么就新建</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13">循环访问</h3>
<div class="outline-text-3" id="text-orgheadline13">
<ol class="org-ol">
<li><p>
foreach循环
</p>
<ul class="org-ul">
<li>foreach（$arr as $value）,</li>
<li>foreach($arr as $key=&gt;$value),</li>
</ul>
<p>
前一种方式只获得value，后一种获得key，value,foreach每次在运行之前都会将
数组指针自动重置到数组开头，所以不需要使用reset函数。
</p></li>
<li>while循环
while(list($key, $value) = each($arr))
<ul class="org-ul">
<li><p>
each：返回数组中当前的 键／值对并将数组指针向前移动一步，each返回的也
是一个数组
</p>
<div class="org-src-container">

<pre class="src src-php">$arr = array(
    "aa" =&gt; "one",
    "bb" =&gt; "two",
    "cc" =&gt; "three");
$first_item = each($arr);
/* $first_item = array(0 =&gt; "aa", 1 =&gt; "one", "key" =&gt; "aa", "value" =&gt; "one") */
$second_item = each($arr);
/* $second_item = array(0 =&gt; "bb", 1 =&gt; "two", "key" =&gt; "bb", "value" =&gt; "two") */
</pre>
</div></li>
<li><p>
list会将数组中索引为0,1,2…….对应的值依次赋给list的参数，比如说如果list
有3个参数,那么对应的数组中必须存在以 0,1,2 为key的元素.但是该数组不一
定是所有的key都是整数,也可能有些元素的key是字符串,比如下面的例子第4个
元素的key就是字符串,这种循环方式需要使用reset函数, 该函数不仅在数组循
环中有用,当函数使用数组返回多个值时也很有用.
</p>
<div class="org-src-container">

<pre class="src src-php">$arr = array("aa", "bb", "cc", "hello" =&gt; "dd");
list($a, $b, $c) = $arr; /* $a="aa", $b="bb", $c="cc"*/
list($a, , $c) = $arr;   /* $a="aa", $c="cc" */
</pre>
</div></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">数组排序（原地改变数组）</h3>
<div class="outline-text-3" id="text-orgheadline14">
<ul class="org-ul">
<li>sort（对普通数组排序 ，不要应用于字典数组，因为它返回的排序数组会抹掉原字典数组的key，而将它的key变为0,1,2……）</li>
<li>asort（对字典数组的value排序）</li>
<li>ksort（对字典数组的key排序），</li>
</ul>
<p>
对应的反向（降序）排序rsort，arsort，krsort。Shuffle（随机排序），array_reverse（反向排列）
</p>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">其它数组函数</h3>
<div class="outline-text-3" id="text-orgheadline15">
<ul class="org-ul">
<li>current（当前数组内部指针指向的元素，pos是current的别名）</li>
<li>next（下一个元素的值）</li>
<li>prev（前一个元素的值）</li>
<li>end（内部指针重置到数组末尾，并返回末尾元素的值）</li>
<li>reset（内部指针重置到开头，并返回开头元素的值</li>

<li>count，sizeof（都返回数组的元素个数）</li>
<li>array_count_values（返回数组元素中各个值出现的频率）</li>
<li>extract（创建一系列以数组的key为名称的变量，而且这些变量的值是对应的value）。</li>
<li>array_slice: 取出数组的一部分.</li>
<li>array_keys : 将数组的所有键作为一个数组返回.</li>
<li>array_values: 将数组的所有值作为一个数组返回.</li>
<li>in_array    : 一个值是否在数组中</li>
<li>array_key_exists: 一个key是否在数组中.</li>

<li>array_walk : 对数组的每个元素(<b>只是value,不包括key</b>)应用一个自定义函数, 和
<code>scheme</code> 的 <code>for-each</code> 类似.</li>
<li>array_filter : 和 <code>scheme</code> 中 <code>filter</code> 函数相似.</li>
<li>array_map    : 和 <code>map</code> 相似.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16">字符串处理函数</h2>
<div class="outline-text-2" id="text-orgheadline16">
<p>
不原地改变，而是返回一个新的结果字符串
</p>
</div>
<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">常规字符串处理函数</h3>
<div class="outline-text-3" id="text-orgheadline17">
<ul class="org-ul">
<li>trim(ltrim,rtrim(别名chop)：删除字符串的首尾两端的空格。ltrim只删除开头的空格，rtrim只删除结尾的空格。</li>
<li>nl2br: 将字符串中的\n转换为,&lt;br /&gt;标签，这样可以在html中换行。</li>
<li>printf,sprintf:格式化输出。</li>
<li>strtolower（全部小写）,strtoupper（全部大写）,ucfirst（第一个字母大写）,ucwords（所有词的第一个字母大写）。</li>
<li>addslashes，stripslashes:将引号，反斜杠，NULL字符字符转义，以免在存入数据库时被当做控制字符，前者是添加，后者是删除，前者在存入数据库前调用，后者在从数据库取出数据后调用。</li>
<li>explode，implode（join）：前者分割字符串成数组，后者将数组合成字符串，都需要知道分隔符，join是implode的别名。</li>
<li>strtok：一次只会返回分割得到的一个字符串，而不是像explode那样返回数组</li>
<li>substr：指定开始与结尾来得到一个指定字符串的子字符串。</li>
<li>字符串的比较：strcmp，strcasecmp（前者区分大小写，后者不区分，是字典序比较，故‘2‘&gt;’12’）,strnatcmp,strnatcasecmp(按自然序比较，故’12’&gt;’2’).</li>
<li>strlen：字符串的长度。</li>
<li>查找子字符串：strstr（strchr 是strstr的别名，strstr区分大小写，stristr不区分大小写,都返回子字符串第一次出现的位置到结尾形成的字符串），strrchr(返回子字符串最后一次出现的位置到结尾形成的字符串)</li>
<li>查找子字符串的位置：strpos，strrpos</li>
<li>替换子字符串：str_replace，substr_replace</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">正则表达式函数</h3>
<div class="outline-text-3" id="text-orgheadline18">
<ul class="org-ul">
<li>ereg（eregi不区分大小写）：搜索一个匹配，可以使用子模式。</li>
<li>ereg_replace,eregi_replace：替换</li>
<li><p>
split：用指定的模式将字符串分割为一个数组
</p>

<p>
<b>以上的函数是POSIX正则表达式，而php5.3被废弃，全部采用perl兼容的正则表达式，主要函数如下：</b>
</p></li>
<li>preg_match:搜索给定模式的一个匹配，可以将该匹配按子模式分割成数组返回，其中【0】是完整的匹配，【1】是第一个子模式的匹配，以此类推。</li>
<li>preg_match_all：搜索所有给定模式的匹配，返回一个多维数组，该多维数组会包含所有的完整匹配以及子模式匹配，数组的组织形式由flag参数指定。</li>
<li>preg_grep:搜索一个给定的数组</li>
<li>preg_replace:替换。</li>
<li>preg_split:分割为数组。
Perl正则表达式和POSISX表达式的区别：perl正则表达式的模式需要分隔符，分隔符放在pattern的开头和结尾，可以使/,#,~等，没有专门为区分大小写编写对应的函数，而是使用模式修饰符，模式修饰符放在pattern的分隔符的后面，主要有i（不区分大小写）s（点号匹配换行符）U逆转贪婪模式，perl从第一个合法匹配后停止，而且是贪婪模式。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-2">
<h2 id="orgheadline19">文件</h2>
<div class="outline-text-2" id="text-orgheadline19">
<ul class="org-ul">
<li>fopen：打开文件，为了移植性模式应该加上b。可以打开网络上的远程文件。</li>
<li>fwrite（fputs是fwrite的别名）：写文件</li>
<li>file_put_contents:可以在不使用fopen的情况下写入文件</li>
<li>fgets,fgetss,fgetcsv:读取文件的一行数据，fgetss会去掉读出的行中的php与html标签，fgetcsv可以将读出的行分割为数组返回。</li>
<li>readfile，file，fpassthru：读取整个文件。Readfile是向标准输出显示，file是读入一个数组。</li>
<li>fgetc：读入一个字符，会显示EOF结束符，所以需要检查。</li>
<li>fread：读入任意字节的字符串。</li>
<li>file_get_contents：在不使用fopen的情况下直接从文件读。</li>
<li>file_exists：文件是否存在。</li>
<li>filesize：文件的大小。</li>
<li>unlink：删除文件。</li>
<li>rewind，fseek，ftell：rewind复位到文件开头，fseek文件中定位，ftell目前文件指针的位置。</li>
<li>flock：文件锁定。</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline24" class="outline-2">
<h2 id="orgheadline24">function</h2>
<div class="outline-text-2" id="text-orgheadline24">
</div><div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20">定义</h3>
<div class="outline-text-3" id="text-orgheadline20">
<pre class="example">
function  func_name($a, $b….)
{
    your code
}
</pre>
<p>
可以使用默认参数，方法是在形参后加=，eg：上例 $b = 1函数使用return和C语言类
似.
</p>
<div class="org-src-container">

<pre class="src src-php">&lt;?php
function foo($arg_1, $arg_2, /* ..., */ $arg_n)
{
    echo "Example function.\n";
    return $retval;
}
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21">可变参数</h3>
<div class="outline-text-3" id="text-orgheadline21">
<ol class="org-ol">
<li>func_num_args() : 返回当前调用的参数个数</li>
<li><p>
func_get_arg(int $arg_num) : 返回单个参数, eg: func_get_arg(0) 返回当前
调用地第一个参数.
</p>
<div class="org-src-container">

<pre class="src src-php">&lt;?php
function foo()
{
    $numargs = func_num_args();
    if($numargs &gt;= 2){
        echo "the second argument is: " . func_get_arg(1);
        echo '&lt;br /&gt;';
    }
    echo "the argument list is: ";
    var_dump(func_get_args ());
}
foo('first arg', 'second arg');
?&gt;
</pre>
</div></li>
<li>func_get_args : 以一个数组的形式返回当前调用的参数列表.</li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22">引用</h3>
<div class="outline-text-3" id="text-orgheadline22">
<p>
函数可以传递引用也可以返回引用,函数返回引用时必须在定义与调用的时候都加上&amp;，
但是return语句不用加&amp;
</p>
<div class="org-src-container">

<pre class="src src-php">&lt;?php
function add_some_extra(&amp;$string)
{
    $string .= 'and something extra.';
}
$str = 'This is a string,';
add_some_extra($str);        /* don't use add_some_extra(&amp;$str) */
echo $str;    //outputs 'This is a string, and something extra.'
?&gt;

&lt;?php
function &amp;returns_reference()
{
    return $someref;
}

$newref =&amp; returns_reference();
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23">注意事项</h3>
<div class="outline-text-3" id="text-orgheadline23">
<ol class="org-ol">
<li>php 的函数中要引用全局变量, 必须使用 global $varname; 来申明,否则php它会
自动创建一个初始值为0的新变量 <b>bad design</b>.</li>
<li>php的函数可以看做是残缺的high order function. 可以将函数赋给一个变量,然
后直接通过变量来调用.但是函数返回以及匿名函数就实现的比较糟糕,这也是
<b>bad design</b>.</li>
<li>php中的函数与类都是全局作用域,可以一个函数内定义,而在外部调用, <b>bad
design</b></li>
<li>php不支持函数重载,也不可能取消或者重定义已声明的函数</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgheadline25" class="outline-2">
<h2 id="orgheadline25">OOP</h2>
<div class="outline-text-2" id="text-orgheadline25">
<p>
示例代码:
</p>
<div class="org-src-container">

<pre class="src src-php">&lt;?php

class A
{
   var $attribute1; //这个类实例的属性，不是类本身的属性，不要和python弄混了。默认公有
   public $attribute2;//指定public，private后最好省掉var
   private $attribute3 = 2;//可以直接赋值，不一定要在构造函数中
   protected $attribute4;

   public static $my_static = 5; //静态变量也是类变量，类外部访问
   //A::my_static; 类内部访问：parent::my_static,self::my_static

   function __construct($param)  //构造函数
   {
       /*
        * 不是 $this-&gt;$attribute1, 因为 $this-&gt;$attribute1 会先将
        * $attribute1 求值, 得到的值再作为属性名去查找, 所以如果
        * $attribute1 的求值结果为 'aa', 那么 $this-&gt;$attribute1 就等价于
        * $this-&gt;aa .
        */
       $this-&gt;attribute1 = $param;
   }
   function __destruct()  //析构函数
   {
   }
   function __get($name)
   {
       /*
        *可以拦截$obj-&gt;$name这种对类实例的属性直接访问的语句。
        *只有在$name属性没有定义时才会触发,这意味着当属性是私有或者保护时也会触发
        */
       return $this-&gt;$name;
   }
   function __set($name, $value)
   {
       /* 可以拦截$obj-&gt;$name=$value这种对类实例的属性的值直接赋值的语句。
        * 只有在$name属性没有定义时才会触发,这意味着当属性是私有或者保护时也会触发
        * Example:
        *         $obj-&gt;aa = 2
        * 等价于:
        *         __set('aa', 2)
        */
       $this-&gt;$name = $value;
   }
   function operation1() //默认公有
   {
   }
}
class B extends A
{//继承都是类似于C++的公有继承
 //可以重载子类的属性与成员方法
   function __construct()
   {
       parent::__construct();//执行父类的构造函数
   }
}

// interface (接口)
interface iTemplate
{
   public function setVariable($name, $var);
   public function getHtml($template);
}

class Template implements iTemplate
{
   private $vars = array();

   public function setVariable($name, $var)
   {
       $this-&gt;vars[$name] = $var;
   }

   public function getHtml($template)
   {
       foreach($this-&gt;vars as $name =&gt; $value) {
           $template = str_replace('{' . $name . '}', $value, $template);
       }

       return $template;
   }
}

$object = new A() //实例化类
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline28" class="outline-2">
<h2 id="orgheadline28">php与数据库（mysql）</h2>
<div class="outline-text-2" id="text-orgheadline28">
</div><div id="outline-container-orgheadline26" class="outline-3">
<h3 id="orgheadline26">示例代码</h3>
<div class="outline-text-3" id="text-orgheadline26">
<div class="org-src-container">

<pre class="src src-php">&lt;?php

//面向过程的代码
$db = mysqli_connect("example.com", "user", "password", "database");
if (mysqli_connect_errno($db)) {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$res = mysqli_query($db, "SELECT 'A world full of ' AS _msg FROM DUAL");
$row = mysqli_fetch_assoc($res);
echo $row['_msg'];


//面向对象的代码
$db = new mysqli("example.com", "user", "password", "database");
if ($db-&gt;connect_errno) {
    echo "Failed to connect to MySQL: " . $db-&gt;connect_error;
}

$res = $db-&gt;query("SELECT 'choices to please everybody,' AS _msg FROM DUAL");
$num_results = $res-&gt;num_rows;
for($i = 0;$i &lt; $num_result; $i++)
{
$row = $res-&gt;fetch_assoc();
echo $row['_msg'];
}
$res-&gt;free();
$db-&gt;close();

 ?&gt;
</pre>
</div>
<p>
为了防止SQL注入攻击，应该对用户的输入使用mysqli_real_escape_string函数，他
会将输入的引号等特殊字符转义，不建议使用addslashes.
</p>
</div>
</div>
<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27">解释</h3>
<div class="outline-text-3" id="text-orgheadline27">
<p>
php执行一次query时,如果是select 查询,那么会返回一个mysqli_result对象.如果是
其它查询,那么成功就返回 True.
</p>
<ol class="org-ol">
<li>mysqli_result:
<ul class="org-ul">
<li>$num_rows(属性): 结果集的记录条数</li>
<li><p>
fetch_assoc(方法): 将一条记录作为一个关联数组返回, 数组的key是数据表的
field name, 同时将记录指针移到下一条记录.可以用while了来循环读取.
</p>
<div class="org-src-container">

<pre class="src src-php">while ($row = $result-&gt;fetch_assoc()) {
    printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
}
</pre>
</div></li>
</ul></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgheadline29" class="outline-2">
<h2 id="orgheadline29">其它技巧</h2>
<div class="outline-text-2" id="text-orgheadline29">
<ol class="org-ol">
<li>对字符串可以使用单，双引号的场合尽量使用单引号，因为使用双引号效率不高。</li>
<li>可以在表达式前加 @ 来抑制错误.</li>
<li>私有的变量与方法的名字应该以下划线开头.</li>
<li>对于一个没有设置的变量直接用 <code>if</code> 会有错误，因此应该使用isset或者empty检
查，推荐empty。</li>
<li>show_source函数可以高亮显示程序代码。</li>
<li><p>
密码加密推荐使用crypt函数的blowfish算法，不推荐使用sha1,或者md5.
</p>
<div class="org-src-container">

<pre class="src src-php">&lt;?php
$hash = crypt($password);
if (crypt($user_input, $hash) == $hash) { /* use hash as the salt */
   echo "Password verified!";
}
?&gt;
</pre>
</div></li>
<li>生成一个唯一的字符串：uniqid函数。</li>
<li>对于表单，在点击提交按钮之前$_POST中的索引是不存在的，所以这样调用
$_POST['name']试图获得name输入框的值会报错，因为 'name' 索引不存在。这时
调用isset和empty返回false与true，如果点击了提交按钮，但是用户没有在输入框
中输入任何数据，那么$_POST['name']的值是空字符串，这时调用isset会返回true，
所以最好调用empty函数。</li>
<li>尽量使用字符串处理函数，而不要使用正则表达式，因为前者更快。</li>
<li>__autoload($classname)需要自动加载的时候，定义这个函数。</li>
<li>每一个成功的POST页面都应该重定向，因为如果不重定向，那么刷新该页面会造成
POST数据重复提交。。</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<!-- 多说评论框 start -->
  <div id="duoshuo-id" class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
   var url = window.location.pathname;
   var duoshuo_identifier = url.substring(url.lastIndexOf('/')+1);
   if (!!! duoshuo_identifier) {
     duoshuo_identifier = "index.html";
   }
   var title = document.title;
   var ele = document.getElementById("duoshuo-id");
   ele.setAttribute("data-thread-key", duoshuo_identifier);
   ele.setAttribute("data-title", title);
   ele.setAttribute("data-url", url);

</script>

<script type="text/javascript">
var duoshuoQuery = {short_name:"yuyang0"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementById('postamble')
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end --><!-- begin footer -->
<div id="footer">
  <ul class="links vertical-nav">
    <li><a href="/sitemap.xml">Sitemap</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about.html">About Me</a></li>
    <li><a class="back-to-top" href="#">Back to Top</a></li>
  </ul>
  <span>© 2013 Yu Yang's Blog, Created by org-mode and dropbox</span>
  <a href="#" class="back-to-top" id="fixed-back-to-top" ></a>
</div>
<script src="http://apps.bdimg.com/libs/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript">
	window.jQuery || document.write('<script src="static/js/jquery-2.0.0.min.js"><\/script>');
	</script>
<script type="text/javascript" src="static/js/custom.js"></script>
<!-- end footer -->
</div>
</body>
</html>
